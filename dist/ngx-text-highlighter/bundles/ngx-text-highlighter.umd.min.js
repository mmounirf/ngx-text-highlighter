!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-text-highlighter",["exports","@angular/core","@angular/common"],t):t(e["ngx-text-highlighter"]={},e.ng.core,e.ng.common)}(this,function(e,r,t){"use strict";var o=function(){function e(){}return e.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=r.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),n=function(){function e(){this.event=new r.EventEmitter}return e.prototype.dispatch=function(e){this.event.emit(e)},e.prototype.listen=function(){return this.event},e.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=r.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),i=function(){function e(e){this.events=e,this.textSelection=new r.EventEmitter,this.markerStyle="fixed",this.colors=["#f44336","#ffeb3b","#4caf50"]}return e.prototype.ngOnInit=function(){var t=this;this.colors.length<1&&(this.colors=["#f44336","#ffeb3b","#4caf50"]),this.events.listen().subscribe(function(e){switch(e.origin){case"textarea":t.textSelection.emit({selection:e.selection,mouseEvent:e.mouseEvent})}})},e.prototype.ngOnDestroy=function(){this.events.listen().unsubscribe()},e.decorators=[{type:r.Component,args:[{selector:"th-container",template:'\n    <th-marker [markerStyle]="markerStyle" [colors]="colors"></th-marker>\n    <th-textarea></th-textarea>\n    <th-stored-highlights [filters]="colors"></th-stored-highlights>\n  ',styles:[]}]}],e.ctorParameters=function(){return[{type:n}]},e.propDecorators={textSelection:[{type:r.Output}],markerStyle:[{type:r.Input,args:["markerStyle"]}],colors:[{type:r.Input,args:["colors"]}]},e}(),s=function(){function e(e,t){this._document=e,this.events=t,this.blur=new r.EventEmitter}return e.prototype.ngOnInit=function(){var t=this;this.events.listen().subscribe(function(e){"marker"===e.origin&&"highlight"===e.type&&t.marker(e.color,t.selectedText)})},e.prototype.restoreSelection=function(){if(!this.savedSelection)return!1;if(window.getSelection){var e=window.getSelection();return e.removeAllRanges(),e.addRange(this.savedSelection),!0}return!!this._document.getSelection||void 0},e.prototype.marker=function(e,t){this.restoreSelection()&&(this._document.execCommand("hiliteColor",!1,e),this.events.dispatch({origin:"textarea",type:"store",color:e,text:t}))},e.prototype.onTextAreaBlur=function(){if(window.getSelection){var e=window.getSelection();e.getRangeAt&&e.rangeCount&&(this.savedSelection=e.getRangeAt(0),this.selectedText=e.toString())}else this._document.getSelection&&this._document.createRange?this.savedSelection=document.createRange():this.savedSelection=null},e.prototype.onSelection=function(e){var t=window.getSelection();"Range"===t.type&&this.events.dispatch({origin:"textarea",type:"selection",value:t}),"Range"!==t.type&&this.events.dispatch({origin:"textarea",type:"blur"})},e.prototype.ngOnDestroy=function(){this.events.listen().unsubscribe()},e.decorators=[{type:r.Component,args:[{selector:"th-textarea",template:'    <div class="textarea"\n        (mouseup)="onSelection($event)"\n        [attr.contenteditable]="true"\n        (blur)="onTextAreaBlur()"\n        placeholder="Enter text here..."\n    >\n    </div>\n',styles:[".textarea{height:250px;overflow:auto;background-color:#fff;padding:20px;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12);border-radius:4px;line-height:2em}.textarea:focus{outline:0}[contenteditable=true]:empty:before{content:attr(placeholder);display:block;color:#676767}"]}]}],e.ctorParameters=function(){return[{type:undefined,decorators:[{type:r.Inject,args:[t.DOCUMENT]}]},{type:n}]},e.propDecorators={blur:[{type:r.Output}]},e}(),l=function(){function e(e){this.events=e,this.store=[],this.selectedFilters=[]}return e.prototype.ngOnInit=function(){var t=this;this.events.listen().subscribe(function(e){"textarea"===e.origin&&"store"===e.type&&t.store.push({text:e.text,color:e.color})})},e.prototype.setFilter=function(e){this.isSelected(e)?this.selectedFilters.splice(this.selectedFilters.indexOf(e),1):this.selectedFilters.push(e)},e.prototype.isSelected=function(e){return this.selectedFilters.includes(e)},e.prototype.ngOnDestroy=function(){this.events.listen().unsubscribe()},e.decorators=[{type:r.Component,args:[{selector:"th-stored-highlights",template:'<div class="storage-wrapper">\n  <ul class="storage-filters">\n    <li *ngFor="let filter of filters" [ngStyle]="{\'background-color\': filter}" [ngClass]="isSelected(filter) ? \'selected\' : \'\'" (click)="setFilter(filter)"></li>\n  </ul>\n  <div class="storage-list">\n    <span *ngIf="(store | colorFilter:selectedFilters).length < 1 && store.length > 0">No items matches the selected filter</span>\n    <span *ngIf="store.length < 1">You\'ve no highlighted items</span>\n    <p *ngFor="let item of store | colorFilter:selectedFilters" [ngStyle]="{\'background-color\': item.color}">{{item.text}}</p>\n  </div>\n</div>\n',styles:[".storage-wrapper{box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}ul.storage-filters{display:flex;margin:20px 0 0;background-color:#e1e1e1;padding:20px;border-radius:4px 4px 0 0}.storage-filters li{width:30px;height:30px;cursor:pointer;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);list-style:none;margin-right:10px;position:relative}.storage-filters li.selected:after{position:absolute;content:'\\2713';font-size:25px;color:#fff;font-weight:bolder;text-align:center;width:30px;height:30px}div.storage-list{display:inline-block;padding:20px}.storage-list span{color:#676767}.storage-list p{padding:10px;margin:10px 0;float:left;clear:left;border-radius:4px;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);transition:box-shadow .3s cubic-bezier(.25,.8,.25,1);cursor:pointer}.storage-list p:hover{box-shadow:0 14px 28px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.22)}"]}]}],e.ctorParameters=function(){return[{type:n}]},e.propDecorators={store:[{type:r.Input,args:["store"]}],filters:[{type:r.Input,args:["filters"]}]},e}(),a=function(){function e(e){this.events=e,this.positionX=0,this.positionY=0,this.visibility="hidden",this.markerStyle="fixed",this.colors=["#f44336","#ffeb3b","#4caf50"]}return e.prototype.ngOnInit=function(){var n=this;this.events.listen().subscribe(function(e){if("textarea"===e.origin&&"selection"===e.type&&"float"===n.markerStyle){var t=window.getComputedStyle(n.floatingMarker.nativeElement).width,r=e.value.getRangeAt(0).getBoundingClientRect().width,o=(parseInt(t,0)-r)/2;n.positionX=e.value.getRangeAt(0).getBoundingClientRect().left-o,n.positionY=e.value.getRangeAt(0).getBoundingClientRect().top-64,n.visibility="visible"}"textarea"===e.origin&&"blur"===e.type&&"float"===n.markerStyle&&(n.visibility="hidden")})},e.prototype.mark=function(e){this.events.dispatch({origin:"marker",type:"highlight",color:e})},e.prototype.ngOnDestroy=function(){this.events.listen().unsubscribe()},e.decorators=[{type:r.Component,args:[{selector:"th-marker",template:'<div class="fixed colors" *ngIf="markerStyle === \'fixed\'">\n  <div class="color" *ngFor="let color of colors" [ngStyle]="{\'background-color\': color}" (click)="mark(color)"></div>\n</div>\n\n<div #floatingMarker class="floating colors" *ngIf="markerStyle === \'float\'" [ngStyle]="{\'left\': positionX+\'px\', \'top\': positionY+\'px\', \'visibility\': visibility}">\n    <div class="color" *ngFor="let color of colors" [ngStyle]="{\'background-color\': color}" (click)="mark(color)"></div>\n</div>\n',styles:[".colors.fixed{width:100%;display:flex;flex-wrap:wrap}.fixed>.color{width:30px;height:30px;margin:0 10px 10px 0;cursor:pointer;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);transition:.3s cubic-bezier(.25,.8,.25,1)}.fixed>.color:hover{border-radius:50%;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.colors.floating{position:absolute;width:auto;background-color:#404040;border-radius:4px;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12);transition:top .3s cubic-bezier(.25,.8,.25,1);display:flex}.floating>.color{margin:10px;cursor:pointer;width:30px;height:30px;transition:top .3s cubic-bezier(.25,.8,.25,1),border-radius .3s cubic-bezier(.25,.8,.25,1);z-index:10}.floating>.color:hover{border-radius:50%}.floating.colors:after{content:'';display:block;position:absolute;background-color:#404040;width:20px;height:20px;bottom:-5px;left:calc(50% - 10px);-webkit-transform:rotate(45deg);transform:rotate(45deg);z-index:1}"]}]}],e.ctorParameters=function(){return[{type:n}]},e.propDecorators={markerStyle:[{type:r.Input,args:["markerStyle"]}],colors:[{type:r.Input,args:["colors"]}],floatingMarker:[{type:r.ViewChild,args:["floatingMarker"]}]},e}(),c=function(){function e(){}return e.prototype.transform=function(e,t){var r=this;return 0!==t.length&&t?e.filter(function(e){return r.isFilterExist(e.color,t)}):e},e.prototype.isFilterExist=function(e,t){return t.includes(e)},e.decorators=[{type:r.Pipe,args:[{name:"colorFilter",pure:!1}]}],e}(),p=function(){function e(){}return e.decorators=[{type:r.NgModule,args:[{imports:[t.CommonModule],declarations:[i,s,l,a,c],exports:[i]}]}],e}();e.NgxTextHighlighterService=o,e.NgxTextHighlighterComponent=i,e.NgxTextHighlighterModule=p,e.ɵd=a,e.ɵc=l,e.ɵb=s,e.ɵe=c,e.ɵa=n,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-text-highlighter.umd.min.js.map