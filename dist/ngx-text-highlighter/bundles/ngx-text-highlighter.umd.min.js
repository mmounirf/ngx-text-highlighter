!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define("ngx-text-highlighter",["exports","@angular/core","@angular/common","@angular/platform-browser"],e):e(t["ngx-text-highlighter"]={},t.ng.core,t.ng.common,t.ng.platformBrowser)}(this,function(t,r,e,o){"use strict";var n=function(){function t(){}return t.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=r.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),i=function(){function t(){this.event=new r.EventEmitter}return t.prototype.dispatch=function(t){this.event.emit(t)},t.prototype.listen=function(){return this.event},t.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=r.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),s=function(){function t(t){this.events=t,this.textSelection=new r.EventEmitter,this.markerStyle="fixed",this.colors=["#f44336","#ffeb3b","#4caf50"]}return t.prototype.ngOnInit=function(){var e=this;this.events.listen().subscribe(function(t){switch(t.origin){case"textarea":e.textSelection.emit({selection:t.selection,mouseEvent:t.mouseEvent})}})},t.prototype.ngOnDestroy=function(){this.events.listen().unsubscribe()},t.decorators=[{type:r.Component,args:[{selector:"th-container",template:'\n    <th-marker [markerStyle]="markerStyle" [colors]="colors"></th-marker>\n    <th-textarea></th-textarea>\n    <th-stored-highlights [filters]="colors"></th-stored-highlights>\n  ',styles:[]}]}],t.ctorParameters=function(){return[{type:i}]},t.propDecorators={textSelection:[{type:r.Output}],markerStyle:[{type:r.Input,args:["markerStyle"]}],colors:[{type:r.Input,args:["colors"]}]},t}(),a=function(){function t(t,e){this._document=t,this.events=e,this.blur=new r.EventEmitter}return t.prototype.ngOnInit=function(){var e=this;this.events.listen().subscribe(function(t){"marker"===t.origin&&"highlight"===t.type&&e.marker(t.color,e.selectedText)})},t.prototype.restoreSelection=function(){if(!this.savedSelection)return!1;if(window.getSelection){var t=window.getSelection();return t.removeAllRanges(),t.addRange(this.savedSelection),!0}return!!this._document.getSelection||void 0},t.prototype.marker=function(t,e){this.restoreSelection()&&(this._document.execCommand("hiliteColor",!1,t),this.events.dispatch({origin:"textarea",type:"store",color:t,text:e}))},t.prototype.onTextAreaBlur=function(){if(window.getSelection){var t=window.getSelection();t.getRangeAt&&t.rangeCount&&(this.savedSelection=t.getRangeAt(0),this.selectedText=t.toString())}else this._document.getSelection&&this._document.createRange?this.savedSelection=document.createRange():this.savedSelection=null},t.prototype.onSelection=function(t){var e=window.getSelection();"Range"===e.type&&this.events.dispatch({origin:"textarea",type:"selection",value:e}),"Range"!==e.type&&this.events.dispatch({origin:"textarea",type:"blur"})},t.decorators=[{type:r.Component,args:[{selector:"th-textarea",template:'    <div class="textarea"\n        (mouseup)="onSelection($event)"\n        [attr.contenteditable]="true"\n        (blur)="onTextAreaBlur()"\n        placeholder="Enter text here..."\n    >\n    </div>\n',styles:[".textarea{height:250px;overflow:auto;background-color:#fff;padding:20px;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12);border-radius:4px;line-height:2em}.textarea:focus{outline:0}[contenteditable=true]:empty:before{content:attr(placeholder);display:block;color:#676767}"]}]}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:r.Inject,args:[e.DOCUMENT]}]},{type:i}]},t.propDecorators={blur:[{type:r.Output}]},t}(),l=function(){function t(t){this.events=t,this.store=[]}return t.prototype.ngOnInit=function(){var e=this;this.events.listen().subscribe(function(t){"textarea"===t.origin&&"store"===t.type&&e.store.push({text:t.text,color:t.color})}),console.log(this.filters)},t.decorators=[{type:r.Component,args:[{selector:"th-stored-highlights",template:'<div class="storage-wrapper">\n  <ul class="sotrage-filters">\n    <li *ngFor="let filter of filters" [ngStyle]="{\'background-color\': filter.color}"></li>\n  </ul>\n  <ul class="sotrage-list">\n    <li *ngFor="let item of store" [ngStyle]="{\'background-color\': item.color}">{{item.text}}</li>\n  </ul>\n</div>\n',styles:[""]}]}],t.ctorParameters=function(){return[{type:i}]},t.propDecorators={store:[{type:r.Input,args:["store"]}],filters:[{type:r.Input,args:["filters"]}]},t}(),c=function(){function t(t){this.events=t,this.positionX=0,this.positionY=0,this.visibility="hidden",this.markerStyle="fixed"}return t.prototype.ngOnInit=function(){var n=this;this.events.listen().subscribe(function(t){if("textarea"===t.origin&&"selection"===t.type&&"float"===n.markerStyle){var e=window.getComputedStyle(n.floatingMarker.nativeElement).width,r=t.value.getRangeAt(0).getBoundingClientRect().width,o=(parseInt(e,0)-r)/2;n.positionX=t.value.getRangeAt(0).getBoundingClientRect().left-o,n.positionY=t.value.getRangeAt(0).getBoundingClientRect().top-64,n.visibility="visible"}"textarea"===t.origin&&"blur"===t.type&&"float"===n.markerStyle&&(n.visibility="hidden")})},t.prototype.mark=function(t){this.events.dispatch({origin:"marker",type:"highlight",color:t})},t.decorators=[{type:r.Component,args:[{selector:"th-marker",template:'<div class="fixed colors" *ngIf="markerStyle === \'fixed\'">\n  <div class="color" *ngFor="let color of colors" [ngStyle]="{\'background-color\': color}" (click)="mark(color)"></div>\n</div>\n\n<div #floatingMarker class="floating colors" *ngIf="markerStyle === \'float\'" [ngStyle]="{\'left\': positionX+\'px\', \'top\': positionY+\'px\', \'visibility\': visibility}">\n    <div class="color" *ngFor="let color of colors" [ngStyle]="{\'background-color\': color}" (click)="mark(color)"></div>\n</div>\n',styles:[".colors.fixed{width:100%;display:flex;flex-wrap:wrap}.fixed>.color{width:30px;height:30px;margin:0 10px 10px 0;cursor:pointer;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);transition:.3s cubic-bezier(.25,.8,.25,1)}.fixed>.color:hover{border-radius:50%;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.colors.floating{position:absolute;width:auto;background-color:#404040;border-radius:4px;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12);transition:top .3s cubic-bezier(.25,.8,.25,1);display:flex}.floating>.color{margin:10px;cursor:pointer;width:30px;height:30px;transition:top .3s cubic-bezier(.25,.8,.25,1),border-radius .3s cubic-bezier(.25,.8,.25,1);z-index:10}.floating>.color:hover{border-radius:50%}.floating.colors:after{content:'';display:block;position:absolute;background-color:#404040;width:20px;height:20px;bottom:-5px;left:calc(50% - 10px);-webkit-transform:rotate(45deg);transform:rotate(45deg);z-index:1}"]}]}],t.ctorParameters=function(){return[{type:i}]},t.propDecorators={markerStyle:[{type:r.Input,args:["markerStyle"]}],colors:[{type:r.Input,args:["colors"]}],floatingMarker:[{type:r.ViewChild,args:["floatingMarker"]}]},t}(),p=function(){function t(t){this.sanitizer=t}return t.prototype.transform=function(t){return this.sanitizer.bypassSecurityTrustHtml(t)},t.decorators=[{type:r.Pipe,args:[{name:"safeHtml"}]}],t.ctorParameters=function(){return[{type:o.DomSanitizer}]},t}(),u=function(){function t(){}return t.decorators=[{type:r.NgModule,args:[{imports:[e.CommonModule],declarations:[s,a,l,c,p],exports:[s]}]}],t}();t.NgxTextHighlighterService=n,t.NgxTextHighlighterComponent=s,t.NgxTextHighlighterModule=u,t.ɵd=c,t.ɵc=l,t.ɵb=a,t.ɵe=p,t.ɵa=i,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-text-highlighter.umd.min.js.map